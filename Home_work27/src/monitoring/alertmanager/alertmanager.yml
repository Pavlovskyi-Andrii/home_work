# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ AlertManager
global:
  smtp_smarthost: 'localhost:587'
  smtp_from: 'alertmanager@yourdomain.com'

# –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∞–ª–µ—Ä—Ç–æ–≤
route:
  group_by: ['alertname']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 1h
  receiver: 'telegram-notifications'

# –ü–æ–ª—É—á–∞—Ç–µ–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
receivers:
  - name: 'telegram-notifications'
    telegram_configs:
      - bot_token: '8334654031:AAErg8R9Px6ZJ0I0_IVCFyXXj9IfUcpjVRg'  # –ó–∞–º–µ–Ω–∏ –Ω–∞ —Ç–æ–∫–µ–Ω —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞
        chat_id: 228076102       # –ó–∞–º–µ–Ω–∏ –Ω–∞ ID —á–∞—Ç–∞
        api_url: 'https://api.telegram.org'
        parse_mode: 'HTML'
        message: |
          <b>üö® –ê–õ–ï–†–¢: {{ .GroupLabels.alertname }}</b>
          
          <b>–°—Ç–∞—Ç—É—Å:</b> {{ .Status }}
          <b>–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:</b> {{ .CommonLabels.severity }}
          
          {{ range .Alerts }}
          <b>–û–ø–∏—Å–∞–Ω–∏–µ:</b> {{ .Annotations.description }}
          <b>–í—Ä–µ–º—è:</b> {{ .StartsAt.Format "2006-01-02 15:04:05" }}
          {{ end }}

# –ü–æ–¥–∞–≤–ª–µ–Ω–∏–µ –∞–ª–µ—Ä—Ç–æ–≤ (–º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)
inhibit_rules:
  - source_match:
      severity: 'critical'
    target_match:
      severity: 'warning'
    equal: ['alertname', 'dev', 'instance']